<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        font-family: Arial, sans-serif;
        touch-action: none; /* prevent pinch-zoom on mobile */
      }

      .iframe-container {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      .main-iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
        pointer-events: auto;
      }

      /* Fixed small white rectangle */
      .fixed-rectangle {
        position: fixed;
        bottom: 20px; /* distance from bottom */
        right: 20px;  /* distance from right */
        width: 160px;  /* rectangle width */
        height: 60px; /* rectangle height */
        background-color: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* subtle shadow */
        z-index: 1000; /* above iframe */
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 5px; /* optional rounded corners */
        font-size: 16px;
        font-weight: bold;
        color: black;
        cursor: pointer;
      }

      /* Vertical tool list */
      .tool-list {
        position: fixed;
        bottom: 90px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 1000;
        display: none; /* hidden initially */
      }

      .tool-item {
        width: 50px;
        height: 50px;
        background-color: white;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        cursor: pointer;
      }

      .tool-item img {
        width: 24px;
        height: 24px;
      }

      /* Fullscreen modal for tools */
      .tool-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        z-index: 2000;
        display: none;
        flex-direction: column;
      }

      .tool-modal iframe {
        flex: 1;
        width: 100%;
        border: none;
      }

      .modal-header {
        height: 50px;
        background-color: #4267B2; /* Messenger-style color */
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 15px;
        font-weight: bold;
      }

      .close-btn {
        cursor: pointer;
        font-size: 20px;
      }

    </style>
  </head>
  <body>
    <div class="iframe-container">
      <iframe class="main-iframe" 
        src="https://my-site-dnd500bh-virtualis016.wix-vibe.com" 
        allowfullscreen>
      </iframe>

      <!-- Floating Open Tools button -->
      <div class="fixed-rectangle" id="openToolsBtn">
        Open Tools
      </div>

      <!-- Vertical tool list -->
      <div class="tool-list" id="toolList">
        <div class="tool-item" data-url="https://m.me/j/AbY5jiTwbKSvSNAk/" title="Messenger Group">
          <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="Messenger">
        </div>
        <!-- Add more tools here -->
      </div>

      <!-- Tool Modal -->
      <div class="tool-modal" id="toolModal">
        <div class="modal-header">
          <span id="modalTitle">Tool</span>
          <span class="close-btn" id="closeModal">&times;</span>
        </div>
        <iframe id="modalIframe" src=""></iframe>
      </div>

    </div>

    <script>
      const openToolsBtn = document.getElementById('openToolsBtn');
      const toolList = document.getElementById('toolList');
      const toolItems = document.querySelectorAll('.tool-item');
      const toolModal = document.getElementById('toolModal');
      const modalIframe = document.getElementById('modalIframe');
      const modalTitle = document.getElementById('modalTitle');
      const closeModal = document.getElementById('closeModal');

      // Toggle vertical tool list
      openToolsBtn.addEventListener('click', () => {
        toolList.style.display = toolList.style.display === 'flex' ? 'none' : 'flex';
      });

      // Open tool modal
      toolItems.forEach(item => {
        item.addEventListener('click', () => {
          const url = item.getAttribute('data-url');
          const title = item.getAttribute('title');
          modalTitle.textContent = title;

          // Try to embed in iframe
          modalIframe.src = url;
          toolModal.style.display = 'flex';
          toolList.style.display = 'none';

          // Fallback if iframe blocked
          modalIframe.onload = function() {
            try {
              // Access iframe content will throw if blocked
              const test = modalIframe.contentDocument;
            } catch(e) {
              // Open in new tab if blocked
              window.open(url, '_blank');
              toolModal.style.display = 'none';
              modalIframe.src = '';
            }
          };
        });
      });

      // Close modal
      closeModal.addEventListener('click', () => {
        toolModal.style.display = 'none';
        modalIframe.src = '';
      });
    </script>
  </body>
</html>
